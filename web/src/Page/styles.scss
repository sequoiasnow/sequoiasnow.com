@import '../variables';

.header {
  width: 100%;
  flex: 1;
  margin: 0;
  padding: 0;
  /* Align the navigation svg to the top left. */
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
}

$navigation-size: 700px;

.header svg {
  width: $navigation-size;
  height: auto;
  overflow: visible;
}

/* Animation which slides in the rectangles known as nav-stripe. */
@keyframes nav-stripe-reveal {
  from {
    transform: translateX(-$navigation-size) translateY($navigation-size)  ;
  }  
  to {
    transfo: translateX(0) translateY(0);
  }
}

/* Reveals the elements of the home button. */
@for $i from 0 through 2 {
  @keyframes home-element-reveal-#{$i} {
    0% {
      opacity: 0;
      transform-origin: 50% 50%;
      transform: translate(300px, 0);
    }
    80% {
      opacity: 0;
      transform-origin: 50% 50%;
      transform: translate(300px, 0);
    }
    100% {
      opacity: 1;
      transform-origin: 50% 50%;
      transform: translate(61px * $i, 0);
    }
  }
}

/* Implement the nav-stripe reveal on load. */
.header svg {
  $stripe-reveal-duration: 3s;
  @for $i from 1 through 4 {
    :global(#nav-stripe-#{$i}) {
      animation: nav-stripe-reveal ($i / 4 * $stripe-reveal-duration) ease;
    }
  }

  /* Create the fade in effect for the elements */
  $elements: ('#nav-hydrogen', '#nav-oxygen', '#nav-me');
  $i: 0;
  $home-el-reveal-duration: $stripe-reveal-duration * 1.1;
  @each $el in $elements {
    :global(#{$el}) {
      transform: translate(61px * $i, 0);
      animation: home-element-reveal-#{$i} $home-el-reveal-duration ease ; 
    }
    $i: $i + 1;
  }
}

/* Drawing the path of a triangle, finished by changing the fill opacity. */
@keyframes reveal-home-arrow {
  0% {
    stroke-dasharray: 200;
    stroke-dashoffset: 200;
    fill-opcaity: 0;
  }
  60% {
    fill-opacity: 0;
    stroke-dashoffset: 0;
  }
  100% {
    fill-opacity: 1;
    stroke-dashoffset: 0;
  }
}

@keyframes hide-home-arrow {
  to {
    stroke-dasharray: 200;
    stroke-dashoffset: 200;
    fill-opcaity: 0;
  }
}

/* Another cool effect is what happens when hovering over any home element */
.header svg :global {
  $homet-duration: 1s;
  #nav-home {
    cursor: pointer;
  }

  .nav-home-arrow {
    stroke-dasharray: 200;
    stroke-dashoffset: 200;
    fill-opacity: 0;
    stroke-width: 0.5; 
    animation-delay: $homet-duration;
    & :local { animation: hide-home-arrow $homet-duration ease forwards; }

    &#nav-home-arrow-top         { fill: #fdd299; stroke: #f9b263; }
    &#nav-home-arrow-bottom      { fill: #a8dee7; stroke: #6eced8;}
    &#nav-home-arrow-right       { fill: #f6f29f; stroke: #ede94e; }
    &#nav-home-arrow-left-top    { fill: #cca1c9; stroke: #a66bac; }
    &#nav-home-arrow-left-bottom { fill: #aad59c; stroke: #8aca7e; }
  }

  #nav-home-arrow-background {
    fill-opacity: 0;
    transition: all ($homet-duration / 2) ease;
  }
  
  #nav-home > g {
    transition: all 2s ease;
    will-change: transform;
    z-index: 100;
  }
  
  #nav-home:hover {
    .nav-home-arrow :local { animation: reveal-home-arrow $homet-duration linear forwards; }
    #nav-home-arrow-background { fill-opacity: 1; }    
    #nav-oxygen { transform: translate(0, 67px); }
    #nav-me { transform: translate(61px, 34.5px); } 
  }
}

/* Make the site more mobile friendly. */
@media (max-width: $navigation-size) {
  .header svg {
    width: 100vw; 
    transform: translate(-10vw, -10vw); 
  }
}


/* Include a conveniant place for the document title to go... right above the home 
   button. */
.header .document-title {
  position: absolute;
  right: 50px;
  text-align: right;
  top: 60px;
  font-family: $font-heading;
  font-size: 6em;
  width: 500px;
  width: calc(100% - #{$navigation-size} - 40px);

  @media (max-width: $navigation-size + 600px) {
    font-size: 4.5em;
  }

  @media (max-width: $navigation-size + 300px) {
    font-size: 3.5em;
    top: 40vh;
    width: 60vw;
    
  }
  
  @media (max-width: $navigation-size) {
    top: 40vw;
    right: 10px;
    width: 60vw;
    font-size: 3em;
  }
}

/* Let's create the container for the content */
.header .content {
  position: absolute;
  left: 25vw;
  top: $navigation-size * 5 / 9;
  width: $navigation-size * 1.2;
  padding: 20px;
  min-height: 200px;
  box-sizing: border-box;

  @media (max-width: 1100px) {
    left: 25vw;
    width: $navigation-size * 1.1;
    top: $navigation-size * 2 / 3;
  }

  @media (max-width: $navigation-size + 300px) {
    top: 55vw;
    left: 14vw;
  }
  
  @media (max-width: $navigation-size + 200px) {
    left: 0;
    width: 100%;
    top: 100vw;
  }
}
